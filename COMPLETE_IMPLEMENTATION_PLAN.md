# 経営意思決定支援システム - 完全実装計画

## 現在の実装状況

### ✅ 完了した機能
1. 企業管理（CRUD）
2. 会計年度管理（CRUD）
3. 損益計算書（CRUD）
4. 貸借対照表（CRUD）
5. ダッシュボード（基本的な財務指標）
6. 経営シミュレーション（基本的な予測）

## Excelファイルに基づく追加実装が必要な機能

### Phase 2: 経営管理過去データ機能
#### 2.1 人件費データ管理
- [ ] 人件費データテーブルの作成（部門別、常勤・臨時別、年度別）
- [ ] 人件費データ入力フォーム
- [ ] 人件費データ一覧表示
- [ ] 人件費推移グラフ

#### 2.2 財務諸表データ管理
- [ ] PL（損益計算書）の詳細項目追加
  - 期首棚卸高、期末棚卸高
  - 材料費、外注費、労務費、経費の詳細
  - 販売費及び一般管理費の詳細
- [ ] BS（貸借対照表）の詳細項目追加
  - 手許現預金、売上債権、棚卸資産の詳細
  - 固定資産の詳細（有形・無形）
  - 負債の詳細（流動・固定）

### Phase 3: 財務分析指標機能

#### 3.1 成長力分析
- [ ] 売上高成長率
- [ ] 総資産成長率
- [ ] 純資産成長率
- [ ] 従業員数成長率
- [ ] 成長力グラフ表示

#### 3.2 収益力分析
- [ ] 売上高総利益率
- [ ] 売上高営業利益率
- [ ] 売上高経常利益率
- [ ] 売上高当期純利益率
- [ ] ROA（総資産利益率）
- [ ] ROE（自己資本利益率）
- [ ] 労働生産性
- [ ] 労働分配率
- [ ] 収益力グラフ表示

#### 3.3 資金力分析
- [ ] 流動比率
- [ ] 当座比率
- [ ] 固定比率
- [ ] 固定長期適合率
- [ ] 自己資本比率
- [ ] 負債比率
- [ ] インタレスト・カバレッジ・レシオ
- [ ] 資金力グラフ表示

#### 3.4 生産力分析
- [ ] 総資産回転率
- [ ] 固定資産回転率
- [ ] 流動資産回転率
- [ ] 売上債権回転率
- [ ] 棚卸資産回転率
- [ ] 仕入債務回転率
- [ ] 生産力グラフ表示

### Phase 4: 高度な分析機能

#### 4.1 内部留保シミュレーション
- [ ] 内部留保額の計算
- [ ] 配当性向の設定
- [ ] 内部留保推移シミュレーション
- [ ] 内部留保グラフ表示

#### 4.2 貢献度分析
- [ ] 売上高貢献度分析
- [ ] 利益貢献度分析
- [ ] 部門別貢献度分析
- [ ] 貢献度グラフ表示

#### 4.3 借入金許容限度額分析
- [ ] 借入金許容限度額の計算
- [ ] 債務償還年数の計算
- [ ] 借入金返済計画シミュレーション
- [ ] 借入金許容限度額グラフ表示

#### 4.4 損益分岐点分析
- [ ] 変動費・固定費の分類
- [ ] 損益分岐点売上高の計算
- [ ] 損益分岐点比率の計算
- [ ] 安全余裕率の計算
- [ ] 損益分岐点グラフ表示

#### 4.5 最小二乗法による予測
- [ ] 売上高の最小二乗法予測
- [ ] 費用の最小二乗法予測
- [ ] 予測精度の評価
- [ ] 予測グラフ表示

#### 4.6 差額原価収益分析
- [ ] 差額原価の計算
- [ ] 差額収益の計算
- [ ] 意思決定支援（受注可否判断）
- [ ] 差額原価収益グラフ表示

### Phase 5: 総合経営計画機能

#### 5.1 予算管理
- [ ] 予算データテーブルの作成
- [ ] 予算入力フォーム
- [ ] 実績vs予算比較
- [ ] 予算達成率の計算
- [ ] 予算実績比較グラフ

#### 5.2 複数年度シミュレーション（拡張版）
- [ ] 初年度シミュレーション（詳細版）
- [ ] 2年度シミュレーション（詳細版）
- [ ] 3年度シミュレーション（詳細版）
- [ ] 各年度の成長力・収益力・資金力・生産力分析
- [ ] 複数年度比較グラフ

### Phase 6: 個別経営計画機能

#### 6.1 労務費管理計画
- [ ] 3期労務費管理計画テーブル
- [ ] 初年度労務費管理計画
- [ ] 2年度労務費管理計画
- [ ] 3年度労務費管理計画
- [ ] 部門別・職種別労務費計画
- [ ] 労務費推移グラフ

#### 6.2 設備投資計画
- [ ] 3期設備投資計画テーブル
- [ ] 設備投資項目の管理
- [ ] 減価償却計算
- [ ] 設備投資資金計画
- [ ] 設備投資グラフ

#### 6.3 運転資金計画
- [ ] 主要運転資金計画テーブル
- [ ] 売上債権・棚卸資産・仕入債務の予測
- [ ] 運転資金必要額の計算
- [ ] 運転資金推移グラフ

#### 6.4 資金繰り計画
- [ ] 初年度資金繰り計画（月次）
- [ ] 2年度資金繰り計画（月次）
- [ ] 3年度資金繰り計画（月次）
- [ ] 資金収支の予測
- [ ] 資金繰り表の作成
- [ ] 資金繰りグラフ

#### 6.5 資金調達返済計画
- [ ] 資金調達返済計画テーブル（3期）
- [ ] 借入金の管理
- [ ] 返済スケジュールの作成
- [ ] 金利計算
- [ ] 資金調達返済グラフ

## 実装の優先順位

### 優先度1（最重要）
1. Phase 3: 財務分析指標機能（成長力、収益力、資金力、生産力）
2. Phase 4.4: 損益分岐点分析
3. Phase 5.1: 予算管理

### 優先度2（重要）
1. Phase 2: 経営管理過去データ機能
2. Phase 4.3: 借入金許容限度額分析
3. Phase 6.4: 資金繰り計画

### 優先度3（追加機能）
1. Phase 4.1: 内部留保シミュレーション
2. Phase 4.2: 貢献度分析
3. Phase 4.5: 最小二乗法による予測
4. Phase 4.6: 差額原価収益分析
5. Phase 6.1: 労務費管理計画
6. Phase 6.2: 設備投資計画
7. Phase 6.3: 運転資金計画
8. Phase 6.5: 資金調達返済計画

## 実装スケジュール

- Phase 2: 2-3日
- Phase 3: 2-3日
- Phase 4: 3-4日
- Phase 5: 2-3日
- Phase 6: 3-4日

**合計: 約12-17日**

## 技術的な実装方針

### データベース設計
- 既存のテーブルを拡張
- 新しいテーブルを追加（人件費、予算、設備投資、資金繰りなど）
- リレーションシップの整理

### バックエンド
- Flaskルートの追加
- 計算ロジックの実装（utils/配下に分析モジュールを追加）
- データバリデーション

### フロントエンド
- 新しいページの追加
- Chart.jsによるグラフ表示
- レスポンシブデザイン

### テスト
- 各機能の単体テスト
- 統合テスト
- 本番環境での動作確認
