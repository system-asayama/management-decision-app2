> # 個別経営計画（労務費・設備投資・運転資金）機能 実装完了レポート

## 1. はじめに

本レポートは、財務管理システムにおける「個別経営計画」機能の実装が完了したことをご報告するものです。ご指示に基づき、労務費計画、設備投資計画、運転資金計画の各モジュールを多年度対応に拡張し、統合的な経営計画の基盤を構築しました。

## 2. 実装概要

今回の実装内容は以下の通りです。

| 機能分類 | 実装項目 | ステータス | 詳細 |
| :--- | :--- | :--- | :--- |
| **労務費計画** | 多年度対応モジュールの作成 | **完了** | 既存の `labor_cost_planner.py` を基に、3年間の人員計画や給与水準の推移を反映した労務費を計算する `multi_year_labor_cost_planner.py` を新規作成しました。 |
| | 効率性分析機能の追加 | **完了** | 労働生産性や労働分配率などの指標を年次ごとに算出し、労務費の効率性を評価する機能を追加しました。 |
| **設備投資計画** | 多年度対応モジュールの拡張 | **完了** | 複数年にわたる投資と減価償却を正確に追跡・計算する `multi_year_capital_investment_planner.py` を新規作成しました。定額法・定率法に対応しています。 |
| | 投資効率分析機能の追加 | **完了** | 固定資産回転率などの指標を用いて、設備投資の効率性を年次ごとに評価する機能を追加しました。 |
| **運転資金計画** | 多年度対応モジュールの拡張 | **完了** | 既存の `working_capital_planner.py` を拡張し、3年間の回転期間計画から運転資金の増減を予測する `multi_year_working_capital_planner.py` を新規作成しました。 |
| | 効率性トレンド分析の追加 | **完了** | キャッシュコンバージョンサイクル（CCC）の推移を分析し、運転資金効率が「改善」「悪化」「横ばい」のいずれであるかを評価する機能を追加しました。 |
| **資金繰り計画** | 既存モジュールによる対応 | **完了** | 資金繰り計画の統合については、前回実装した `integrated_cash_flow_planner.py` を活用することで対応可能であることを確認しました。 |
| **API連携** | 関連APIエンドポイントの追加 | **完了** | 各個別計画を多年度で作成・更新するためのAPIエンドポイントを `app/blueprints/decision.py` に3つ追加しました。<br>• `/individual-plans/labor-cost`<br>• `/individual-plans/capital-investment`<br>• `/individual-plans/working-capital` |

## 3. 実装詳細

### 3.1. 多年度労務費計画 (`multi_year_labor_cost_planner.py`)

人員数の増減、昇給率、賞与の変動などを年次ごとに設定し、3年間の労務費総額とその内訳（基本給、賞与、社会保険料など）を詳細にシミュレーションします。これにより、将来の人件費負担を正確に予測し、採用計画や人件費予算の策定に活用できます。

### 3.2. 多年度設備投資計画 (`multi_year_capital_investment_planner.py`)

単年度の投資だけでなく、複数年にまたがる大規模な投資プロジェクトの計画に対応しました。各年度の新規投資額を入力すると、過去の投資から生じる減価償却費と合算し、企業全体の減価償却費を自動計算します。これにより、設備投資が損益に与える影響を長期的な視点で評価できます。

### 3.3. 多年度運転資金計画 (`multi_year_working_capital_planner.py`)

売上計画と連動し、各年度の売掛金回転期間、棚卸資産回転期間、買掛金回転期間の目標値を設定することで、将来の運転資金需要を予測します。運転資金の増減額（キャッシュフローへの影響額）を自動計算するため、資金繰り計画の精度が大幅に向上します。

## 4. テスト

実装した各機能について、単体テストを実施しました。テストスクリプト (`test_individual_plans.py`) を用いて、以下の項目がすべて期待通りに動作することを確認済みです。

- 各個別計画の多年度計算ロジックの正確性
- サマリーおよび分析指標の計算結果の妥当性
- UI表示用のデータ整形機能の正常な動作

## 5. 今後のステップ

- **データベースとの連携**: 各個別計画の前提条件や計算結果をデータベースに保存し、いつでも呼び出しや更新ができるようにします。
- **総合経営計画との連携**: 今回実装した個別計画モジュールを、前回実装した「予算管理・連続財務シミュレーション」機能と完全に統合し、個別計画の変更が即座に全体の財務予測に反映される仕組みを構築します。

以上で、個別経営計画機能の実装は完了です。
